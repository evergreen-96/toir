{% comment %}
templates/components/card_section.html

Карточка-секция с заголовком и контентом.

Использование:
    {% include "components/card_section.html" with title="Информация" icon="bi-info-circle" %}

    С бейджем:
    {% include "components/card_section.html" with title="Подчинённые" icon="bi-people" badge="5" %}

Параметры:
    title       - Заголовок секции
    icon        - Bootstrap Icon класс
    badge       - Текст бейджа (опционально)
    badge_class - CSS класс бейджа (по умолчанию: bg-primary-subtle text-primary-emphasis)
    card_class  - Дополнительные CSS классы для карточки
    body_class  - Дополнительные CSS классы для body (по умолчанию есть padding)
    no_padding  - Убрать padding из body (для таблиц)
    collapsible - Сделать секцию сворачиваемой
    collapsed   - Изначально свёрнута
{% endcomment %}

<div class="card border-0 shadow-sm {{ card_class }}">
    <div class="card-header bg-dark border-0 d-flex justify-content-between align-items-center">
        <h5 class="mb-0">
            {% if icon %}<i class="bi {{ icon }} me-2 text-primary"></i>{% endif %}
            {{ title }}
        </h5>
        {% if badge %}
        <span class="badge {{ badge_class|default:'bg-primary-subtle text-primary-emphasis border border-primary-subtle' }}">
            {{ badge }}
        </span>
        {% endif %}
        {% if collapsible %}
        <button class="btn btn-sm btn-link text-muted p-0" type="button" 
                data-bs-toggle="collapse" data-bs-target="#collapse{{ title|slugify }}">
            <i class="bi bi-chevron-down"></i>
        </button>
        {% endif %}
    </div>
    
    {% if collapsible %}
    <div class="collapse {% if not collapsed %}show{% endif %}" id="collapse{{ title|slugify }}">
    {% endif %}
    
    <div class="card-body {% if no_padding %}p-0{% endif %} {{ body_class }}">
        {{ content }}
    </div>
    
    {% if collapsible %}
    </div>
    {% endif %}
</div>
